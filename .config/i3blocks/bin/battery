#!/bin/bash

cap=$(cat /sys/class/power_supply/BAT0/capacity)
stat=$(cat /sys/class/power_supply/BAT0/status)

case $stat in
	Charging)
		est="$(acpi -b | grep -oP '\d{2}:\d{2}')"
		# echo "${cap}% ${est}"
		# Lime #00ff00
		printf "%%{F#00ff00}%s%% %%{F-}%s" $cap $est
		;;
	Discharging)
		est="$(acpi -b | grep -oP '\d{2}:\d{2}')"
		if [ "${est::2}" -lt 1 ]; then
			printf "%%{F#fb4934}%s%% %%{F-}%s" $cap $est
		else
			printf "%s%% %s" $cap $est
		fi
		;;
	FULL)
		echo "FULL"
		;;
	*)
		exit 2
		;;
esac

